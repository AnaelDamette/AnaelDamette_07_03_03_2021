{"remainingRequest":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\src\\store\\index.js","mtime":1615824239370},{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkM6L1VzZXJzL2MzZ2EvRGVza3RvcC9Gb3JtYXRpb24gV2ViIERldmVsb3BwZXVyL0FuYWVsRGFtZXR0ZV8wN18wM18wM18yMDIxL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKLy9jb25zdCB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7ClZ1ZS51c2UoVnVleCk7CnZhciBzdG9yZSA9IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogewogICAgVXNlcjogewogICAgICBwc2V1ZG86ICdOYycsCiAgICAgIHVzZXJJRDogJ05jJywKICAgICAgbWFpbDogJ05jJywKICAgICAgdG9rZW46IG51bGwsCiAgICAgIGlzQWRtaW46IGZhbHNlCiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNhdmVVc2VySW5mb3M6IGZ1bmN0aW9uIHNhdmVVc2VySW5mb3Moc3RhdGUsIF9yZWYpIHsKICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgNCksCiAgICAgICAgICBwc2V1ZG8gPSBfcmVmMlswXSwKICAgICAgICAgIHVzZXJJZCA9IF9yZWYyWzFdLAogICAgICAgICAgbWFpbCA9IF9yZWYyWzJdLAogICAgICAgICAgaXNBZG1pbiA9IF9yZWYyWzNdOwoKICAgICAgc3RhdGUuVXNlci5wc2V1ZG8gPSBwc2V1ZG8sIHN0YXRlLlVzZXIudXNlcklkID0gdXNlcklkLCBzdGF0ZS5Vc2VyLm1haWwgPSBtYWlsLCBzdGF0ZS5Vc2VyLmlzQWRtaW4gPSBpc0FkbWluOwogICAgfSwKICAgIHNhdmVUb2tlbjogZnVuY3Rpb24gc2F2ZVRva2VuKHN0YXRlKSB7CiAgICAgIHN0YXRlLlVzZXIudG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGdldFVzZXJJbmZvczogZnVuY3Rpb24gZ2V0VXNlckluZm9zKGNvbnRleHQpIHsKICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3VzZXIvbWUiLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3LDqXBvbnNlIEFQSScsIHJlc3BvbnNlKTsKICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2F2ZVVzZXJJbmZvcycsIFtyZXNwb25zZS5kYXRhLnBzZXVkbywgcmVzcG9uc2UuZGF0YS5pZCwgcmVzcG9uc2UuZGF0YS5tYWlsLCByZXNwb25zZS5kYXRhLmlzQWRtaW5dKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0VycmV1ciBhdXRoJywgZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vZHVsZXM6IHt9Cn0pOwpleHBvcnQgZGVmYXVsdCBzdG9yZTs="},{"version":3,"sources":["C:/Users/c3ga/Desktop/Formation Web Developpeur/AnaelDamette_07_03_03_2021/frontend/src/store/index.js"],"names":["axios","Vue","Vuex","use","store","Store","state","User","pseudo","userID","mail","token","isAdmin","mutations","saveUserInfos","userId","saveToken","localStorage","getItem","actions","getUserInfos","context","get","headers","Authorization","then","response","console","log","commit","data","id","catch","error","modules"],"mappings":";AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEAD,GAAG,CAACE,GAAJ,CAAQD,IAAR;AAEA,IAAME,KAAK,GAAG,IAAIF,IAAI,CAACG,KAAT,CAAe;AAC3BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAE;AACJC,MAAAA,MAAM,EAAE,IADJ;AAEJC,MAAAA,MAAM,EAAE,IAFJ;AAGJC,MAAAA,IAAI,EAAE,IAHF;AAIJC,MAAAA,KAAK,EAAE,IAJH;AAKJC,MAAAA,OAAO,EAAE;AALL;AADD,GADoB;AAU3BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,aADS,yBACKR,KADL,QAC6C;AAAA;AAAA,UAAhCE,MAAgC;AAAA,UAAxBO,MAAwB;AAAA,UAAhBL,IAAgB;AAAA,UAAVE,OAAU;;AACpDN,MAAAA,KAAK,CAACC,IAAN,CAAWC,MAAX,GAAoBA,MAApB,EACEF,KAAK,CAACC,IAAN,CAAWQ,MAAX,GAAoBA,MADtB,EAEET,KAAK,CAACC,IAAN,CAAWG,IAAX,GAAkBA,IAFpB,EAIAJ,KAAK,CAACC,IAAN,CAAWK,OAAX,GAAqBA,OAJrB;AAKD,KAPQ;AAQTI,IAAAA,SARS,qBAQCV,KARD,EAQQ;AACfA,MAAAA,KAAK,CAACC,IAAN,CAAWI,KAAX,GAAmBM,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAnB;AACD;AAVQ,GAVgB;AAsB3BC,EAAAA,OAAO,EAAE;AACPC,IAAAA,YADO,wBACMC,OADN,EACe;AACpBrB,MAAAA,KAAK,CACFsB,GADH,CACO,mCADP,EAC4C;AACxCC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAE,YAAYP,YAAY,CAACC,OAAb,CAAqB,OAArB;AADpB;AAD+B,OAD5C,EAMGO,IANH,CAMQ,UAAAC,QAAQ,EAAI;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,QAA3B;AACAL,QAAAA,OAAO,CAACQ,MAAR,CAAe,eAAf,EAAgC,CAACH,QAAQ,CAACI,IAAT,CAActB,MAAf,EAAuBkB,QAAQ,CAACI,IAAT,CAAcC,EAArC,EAAyCL,QAAQ,CAACI,IAAT,CAAcpB,IAAvD,EAA6DgB,QAAQ,CAACI,IAAT,CAAclB,OAA3E,CAAhC;AACD,OATH,EAUGoB,KAVH,CAUS,UAAAC,KAAK,EAAI;AACdN,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BK,KAA3B;AACD,OAZH;AAaD;AAfM,GAtBkB;AAuC3BC,EAAAA,OAAO,EAAE;AAvCkB,CAAf,CAAd;AA0CA,eAAe9B,KAAf","sourcesContent":["//const url = \"http://localhost:3000/api\";\r\nimport axios from \"axios\";\r\nimport Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nVue.use(Vuex)\r\n\r\nconst store = new Vuex.Store({\r\n  state: {\r\n    User: {\r\n      pseudo: 'Nc',\r\n      userID: 'Nc',\r\n      mail: 'Nc',\r\n      token: null,\r\n      isAdmin: false,\r\n    }\r\n  },\r\n  mutations: {\r\n    saveUserInfos(state, [pseudo, userId, mail, isAdmin]) {\r\n      state.User.pseudo = pseudo,\r\n        state.User.userId = userId,\r\n        state.User.mail = mail,\r\n        \r\n      state.User.isAdmin = isAdmin\r\n    },\r\n    saveToken(state) {\r\n      state.User.token = localStorage.getItem('token')\r\n    }\r\n  },\r\n  actions: {\r\n    getUserInfos(context) {\r\n      axios\r\n        .get(\"http://localhost:3000/api/user/me\", {\r\n          headers: {\r\n            Authorization: \"Bearer \" + localStorage.getItem(\"token\")\r\n          }\r\n        })\r\n        .then(response => {\r\n          console.log('rÃ©ponse API', response);\r\n          context.commit('saveUserInfos', [response.data.pseudo, response.data.id, response.data.mail, response.data.isAdmin])\r\n        })\r\n        .catch(error => {\r\n          console.log('Erreur auth', error); \r\n        });\r\n    },\r\n  },\r\n  modules: {\r\n  }\r\n});\r\nexport default store"]}]}