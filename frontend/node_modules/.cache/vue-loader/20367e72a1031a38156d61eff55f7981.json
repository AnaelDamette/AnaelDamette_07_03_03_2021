{"remainingRequest":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\src\\components\\BodyProfil.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\src\\components\\BodyProfil.vue","mtime":1616768116809},{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\c3ga\\Desktop\\Formation Web Developpeur\\AnaelDamette_07_03_03_2021\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IE1lc01lc3NhZ2VzIGZyb20gIi4uL2NvbXBvbmVudHMvTWVzTWVzc2FnZXMiOw0KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCmltcG9ydCBDaGFuZ2VNZHAgZnJvbSAiLi4vY29tcG9uZW50cy9DaGFuZ2VNZHAiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJCb2R5UHJvZmlsIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcmV2ZWxlOiBmYWxzZSwNCiAgICAgIHBvc3Q6IHsNCiAgICAgICAgdXVpZDogIiIsDQogICAgICAgIG1lc3NhZ2U6ICIiLA0KICAgICAgICB0aXRyZTogIiIsDQogICAgICB9LA0KICAgICAgYWxsUG9zdHNVc2VyOiBbXSwNCiAgICB9Ow0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgTWVzTWVzc2FnZXMsDQogICAgQ2hhbmdlTWRwLA0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKFsiVXNlciJdKSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgcHJvZmlsKCkgew0KICAgICAgbGV0IHV1aWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXVpZCIpOw0KICAgICAgYXhpb3MNCiAgICAgICAgLmdldCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb3N0L21lc01lc3NhZ2VzLyIgKyB1dWlkKQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICB0aGlzLmFsbFBvc3RzVXNlciA9IHJlc3BvbnNlLmRhdGEucG9zdDsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICB0b2dnbGVNb2RhbGUoKSB7DQogICAgICBjb25zb2xlLmxvZygiZGFucyBsZSBmb25jdGlvbiB0b2dnbGVNb2RhbGUiKTsNCiAgICAgIHRoaXMucmV2ZWxlID0gIXRoaXMucmV2ZWxlOw0KICAgICAgY29uc29sZS5sb2codGhpcy5yZXZlbGUpOw0KICAgIH0sDQogICAgcmVsb2FkKHJlbG9hZCl7DQogICAgICB0aGlzLnByb2ZpbCgpDQogICAgICBjb25zb2xlLmxvZygidGVzdCBzaSByZWxvYWQgZXN0IGJpZW4gaWNpICEgICIgKyByZWxvYWQpDQogICAgfSwNCiAgICBkZWxldGVBY2NvdW50KCkgew0KICAgICAgbGV0IHV1aWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXVpZCIpOw0KICAgICAgbGV0IGRhdGFEZWxldGUgPSB7DQogICAgICAgIGRlbGV0ZVVzZXJVdWlkOiB1dWlkLCANCiAgICAgICAgdXNlcklzQWRtaW46IHRoaXMuVXNlci5pc0FkbWluDQogICAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKGRhdGFEZWxldGUuZGVsZXRlVXNlclV1aWQgKyAiICBkYXRhRGVsZXRlIEV4aXN0ZSAgIiArIGRhdGFEZWxldGUudXNlcklzQWRtaW4pDQogICAgICBheGlvcw0KICAgICAgICAuZGVsZXRlKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2F1dGgvZGVsZXRlLyIgKyB1dWlkLCB7IGRhdGE6IGRhdGFEZWxldGV9KQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7DQogICAgICAgICAgbG9jYXRpb24ucmVwbGFjZSgiL3NpZ251cCIpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpOw0KICAgIH0sDQogICAgZGVsZXRlUG9zdChkZWxldGVVdWlkUG9zdCkgew0KICAgICAgY29uc29sZS5sb2coInRlc3QgOiAiICsgZGVsZXRlVXVpZFBvc3QpOw0KICAgICAgbGV0IHV1aWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXVpZCIpOw0KICAgICAgY29uc29sZS5sb2coImxlIHBvc3QgdXVpZCA6ICIgKyBkZWxldGVVdWlkUG9zdCArICIgbCd1c2VyIHV1aWQiICsgdXVpZCk7DQogICAgICBheGlvcw0KICAgICAgICAuZGVsZXRlKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3QvZGVsZXRlLyIgKyB1dWlkLCB7DQogICAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgdXVpZFBvc3Q6IGRlbGV0ZVV1aWRQb3N0LA0KICAgICAgICAgICAgdXNlcklkT3JkZXI6IHV1aWQsDQogICAgICAgICAgfSwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMucHJvZmlsKCk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnByb2ZpbCgpOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["BodyProfil.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BodyProfil.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"jumbotron container h-100 ml-auto mr-auto mt-5 shadow-box\">\r\n    <ChangeMdp :revele=\"revele\" :toggleModale=\"toggleModale\" />\r\n\r\n    <div class=\"row\">\r\n      <div\r\n        class=\"col-lg-4 bg-light shadow-box d-flex flex-column p-3 m-3\"\r\n      >\r\n        <h2 class=\"bg-dark rounded shadow-box text-center p-2 text-secondary\">\r\n          Ton profil\r\n        </h2>\r\n        <div class=\"p-2 m-2\">\r\n          <p>Ton Compte : {{ User.username }}</p>\r\n        </div>\r\n        <div class=\"p-2 m-2\">\r\n          <p>Ton email : {{ User.email }}</p>\r\n        </div>\r\n        <div\r\n          type=\"button\"\r\n          id=\"change\"\r\n          class=\"p-2 m-2 btn btn-primary w-50\"\r\n          @click=\"toggleModale\"\r\n        >\r\n          Changement Mot de passe\r\n        </div>\r\n        <button\r\n          type=\"button\"\r\n          class=\"p-2 m-2 btn btn-danger w-50\"\r\n          @click=\"deleteAccount\"\r\n        >\r\n          Supprimer le profil\r\n        </button>\r\n      </div>\r\n      <div\r\n        class=\"col-lg-7 bg-light shadow-box d-flex flex-column p-3 m-3 justify-content-between\"\r\n      >\r\n        <h2 class=\"bg-dark rounded shadow-box text-center p-2 text-secondary\">\r\n          Tes messages\r\n        </h2>\r\n        <div class=\"jumbotron d-flex flex-column p-1 m-2 shadow-box\">\r\n          <MesMessages\r\n            @reload=\"reload\"\r\n            @deletePost=\"deletePost\"\r\n            class=\"p-2\"\r\n            v-for=\"post in allPostsUser\"\r\n            v-bind:key=\"post.id\"\r\n            :post=\"post\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport MesMessages from \"../components/MesMessages\";\r\nimport axios from \"axios\";\r\nimport ChangeMdp from \"../components/ChangeMdp\";\r\n\r\nexport default {\r\n  name: \"BodyProfil\",\r\n  data() {\r\n    return {\r\n      revele: false,\r\n      post: {\r\n        uuid: \"\",\r\n        message: \"\",\r\n        titre: \"\",\r\n      },\r\n      allPostsUser: [],\r\n    };\r\n  },\r\n  components: {\r\n    MesMessages,\r\n    ChangeMdp,\r\n  },\r\n  computed: {\r\n    ...mapState([\"User\"]),\r\n  },\r\n\r\n  methods: {\r\n    profil() {\r\n      let uuid = localStorage.getItem(\"uuid\");\r\n      axios\r\n        .get(\"http://localhost:3000/api/post/mesMessages/\" + uuid)\r\n        .then((response) => {\r\n          this.allPostsUser = response.data.post;\r\n          console.log(response)\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    toggleModale() {\r\n      console.log(\"dans le fonction toggleModale\");\r\n      this.revele = !this.revele;\r\n      console.log(this.revele);\r\n    },\r\n    reload(reload){\r\n      this.profil()\r\n      console.log(\"test si reload est bien ici !  \" + reload)\r\n    },\r\n    deleteAccount() {\r\n      let uuid = localStorage.getItem(\"uuid\");\r\n      let dataDelete = {\r\n        deleteUserUuid: uuid, \r\n        userIsAdmin: this.User.isAdmin\r\n        }\r\n      console.log(dataDelete.deleteUserUuid + \"  dataDelete Existe  \" + dataDelete.userIsAdmin)\r\n      axios\r\n        .delete(\"http://localhost:3000/api/auth/delete/\" + uuid, { data: dataDelete})\r\n        .then(() => {\r\n          localStorage.clear();\r\n          location.replace(\"/signup\");\r\n        })\r\n        .catch((error) => console.log(error));\r\n    },\r\n    deletePost(deleteUuidPost) {\r\n      console.log(\"test : \" + deleteUuidPost);\r\n      let uuid = localStorage.getItem(\"uuid\");\r\n      console.log(\"le post uuid : \" + deleteUuidPost + \" l'user uuid\" + uuid);\r\n      axios\r\n        .delete(\"http://localhost:3000/api/post/delete/\" + uuid, {\r\n          data: {\r\n            uuidPost: deleteUuidPost,\r\n            userIdOrder: uuid,\r\n          },\r\n        })\r\n        .then(() => {\r\n          this.profil();\r\n        })\r\n        .catch((error) => console.log(error));\r\n    },\r\n  },\r\n  mounted() {\r\n    this.profil();\r\n  },\r\n};\r\n</script>"]}]}